const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AdminUserForm-DQc39FV4.js","assets/index-Cvrl6C6l.js","assets/index-C0ZWm-Vk.css","assets/check-Bgq3RPc4.js","assets/AdminPermissionsByUserTable-BFs5zyZL.js","assets/index-CE02Sff_.js"])))=>i.map(i=>d[i]);
import{i as g,k as A,l as U,m as p,w as E,u as b,j as t,N as m,e as l,r as u,a6 as f,o as y}from"./index-Cvrl6C6l.js";const j=async e=>{if(!e)throw new Error("Id is required");if(e==="new")return console.log("llega a new"),{id:"new",email:"",name:"",lastname:"",isActive:!1,isAgente:!1,emailValidated:!1,role:"user"};const{data:s}=await g.get(`/auth/users/${e}`);return s},P=async e=>{const{id:s,files:i=[],...n}=e,r=s==="new";console.log("userLike in action create"),console.log({userLike:e});const{data:o}=await g({url:r?"/auth/register":`/auth//users/${s}`,method:r?"POST":"PUT",data:{...n}});return{...o}},_=e=>{const s=A(),i=U({queryKey:["userById",{id:e}],queryFn:()=>j(e),retry:!1,staleTime:1e3*60*0}),n=p({mutationFn:P,onSuccess:r=>{s.invalidateQueries({queryKey:["userMutation"]}),s.invalidateQueries({queryKey:["userMutation",{id:r.id}]}),s.invalidateQueries({queryKey:["userById"]}),s.invalidateQueries({queryKey:["users"]}),s.setQueryData(["userMutation",{id:r.id}],r)}});return{...i,mutation:n}},q=u.lazy(()=>f(()=>import("./AdminUserForm-DQc39FV4.js"),__vite__mapDeps([0,1,2,3]))),h=u.lazy(()=>f(()=>import("./AdminPermissionsByUserTable-BFs5zyZL.js"),__vite__mapDeps([4,1,2,5,3]))),I=()=>{const{id:e}=E(),s=b(),{isLoading:i,isError:n,data:r,mutation:o}=_(e||"");console.log("user en AdminUserPAge"),console.log({user:r});const x=e==="new"?"Nuevo Usuario":"Editar Usuario",v=e==="new"?"Aquí puedes crear un nuevo Usuario.":"Aquí puedes editar el Usuario.",w=async c=>{event?.preventDefault(),console.log("onsubmit",c),await o.mutateAsync(c,{onSuccess:a=>{let d="Usuario actualizado ";a.id==="new"&&(d="Usuario Creado "),y.fire({title:"Exito",text:d,icon:"success",confirmButtonColor:"#16a34a",timer:2e3,timerProgressBar:!0,background:"#1f2937",color:"#f9fafb"}),s(`/admin/users/${a.id}`)},onError:a=>{console.log(a),y.fire({title:"<b>Error al Guardar</b>",text:`${a?.response?.data?.error||a.message||"Error desconocido"}`,icon:"error"})}})};return n?t.jsx(m,{to:"/admin/users"}):i?t.jsx(l,{}):r?t.jsxs(t.Fragment,{children:[t.jsx(u.Suspense,{fallback:t.jsx(l,{}),children:t.jsx(q,{title:x,subTitle:v,clase:r,onSubmit:w,isPending:o.isPending})}),e!=="new"&&t.jsx(u.Suspense,{fallback:t.jsx(l,{}),children:t.jsx(h,{userId:e})})]}):t.jsx(m,{to:"/admin/users"})};export{I as AdminUserPage,I as default};
