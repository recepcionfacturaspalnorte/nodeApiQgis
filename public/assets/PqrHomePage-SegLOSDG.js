import{u as m,j as e,B as g,P as p,a as x,A as i,L as u,f as h}from"./index-BTQL2UJT.js";import{u as d,H as b,W as j,O as f,S as v}from"./useTicketsPending-Cb55fAO0.js";import{u as y}from"./useTickets-DfnwrKug.js";import{F as N}from"./file-text-C8NtM1jm.js";function c(s){console.log("https://nodepalnortev2-production.up.railway.app/api/images/ticket");const t=m();function o(r){return r?typeof r=="string"?r.slice(0,10):r.toISOString().slice(0,10):""}return e.jsxs("div",{className:`border border-gray-200 rounded-2xl mb-4 \r
        \r
         p-5 shadow-sm bg-white`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("div",{className:"top-0 my-0 flex items-center space-x-0 p-0 rounded-lg  transition-colors",children:e.jsxs("div",{className:"w-33 h-13 bg-gradient-to-br from-green-400 to-green-700 rounded-full flex items-center justify-center text-white font-semibold",children:["TK- ",s.id]})}),e.jsxs(g,{onClick:()=>{t(`/pqr/ticket/${s.id}`)},className:`ml-auto inline-flex items-center gap-1 px-3 py-1.5 \r
      bg-green-50 text-green-700 rounded-md border border-green-200 \r
      hover:bg-green-100 hover:border-green-300 \r
      transition-all duration-200`,children:[e.jsx(p,{className:"w-4 h-4"}),e.jsx("span",{children:"Revisar"})]})]}),e.jsx("div",{className:"mt-4 text-xs text-gray-500 flex flex-wrap gap-4",children:e.jsxs("p",{children:["Creado: ",e.jsx("span",{className:"text-gray-600",children:e.jsxs("span",{className:"text-sm text-gray-500",children:[" ",o(s.fecha)," ",s.hora]})})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("p",{className:"text-gray-800 font-medium text-sm rounded-xl pl-2 pt-2 pb-2 bg-green-200 text-blue-600 ",children:[s.usuario?.lastname?.toUpperCase()," ",s.usuario?.name?.toUpperCase()]}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[e.jsx("p",{className:"text-gray-800 mt-3 font-semibold",children:"    Nombre del Activo:"}),s.activo?.nombre_activo," Marca: ",s.activo?.marca]}),e.jsx("p",{className:"text-gray-800 mt-3 font-semibold",children:s.titulo}),e.jsx("p",{className:"text-gray-800 mt-3 font-semibold",children:s.obser})]}),e.jsx("br",{}),e.jsx("div",{className:"flex  gap-3 pb-12",children:s.images.map((r,n)=>e.jsx("div",{className:"relative gap-3 group w-full h-full",children:e.jsx("img",{onClick:()=>{},src:`${r.url}`,alt:"imagen",className:" object-cover shadow-lg rounded-lg bg-white rounded-xl shadow-lg border border-slate-200 p-1 gap-3 "})},n))})]})}const S=()=>{const{user:s}=x(),{TicketsSummaryByUserId:a}=y(s?.id),{ticketsByUser:t=[]}=d(1,s?.id),{ticketsInProgressByUser:o}=d(2,s?.id);console.log({TicketsSummary:a}),console.log(o),console.log("lista:"),console.log({lista:t}),t?.data&&(console.log("Lista no es null"),console.log("Lista.data"),console.log(t?.data)),o?.data&&(console.log("listaInProgresss no es null"),console.log("listaInProgresss.data"),console.log(o?.data));const r=[{title:"Total Tickets",value:a.data?.count?.toString()||"0",change:"Completados: "+((a.data?.totalInCompleted||0)/(a.data?.count||0)).toFixed(1)+" %",changeType:"positive",icon:N,color:"bg-blue-500",porcen:(a.data?.totalInCompleted||0)/(a.data?.count||0)},{title:"Pendientes",value:a.data?.totalPending?.toString()||0,change:((a.data?.totalPending||0)*100/(a.data?.count||0)).toFixed(1)+" %",changeType:"positive",icon:b,color:"bg-green-500",porcen:(a.data?.totalPending||0)*100/(a.data?.count||0)},{title:"En Progreso",value:a.data?.totalInProgress?.toString()||0,change:((a.data?.totalInProgress||0)*100/(a.data?.count||0)).toFixed(1)+" %",changeType:"negative",icon:j,color:"bg-purple-500",porcen:(a.data?.totalInProgress||0)*100/(a.data?.count||0)},{title:"Cancelados",value:a.data?.totalCancelado?.toString()||0,change:((a.data?.totalCancelado||0)*100/(a.data?.count||0)).toFixed(1)+" %",changeType:"positive",icon:f,color:"bg-orange-500",porcen:(a.data?.totalCancelado||0)*100/(a.data?.count||0)}];return e.jsxs("div",{className:"page fade-in",children:[e.jsx(i,{title:"PÃ¡gina Principal",subtitle:""}),e.jsx("div",{className:"flex gap-2 mb-2 ",children:e.jsx(u,{to:`/pqr/ticket/new/?ticket=${s?.id||""}`,children:e.jsxs(g,{children:[e.jsx(h,{}),"Nuevo Ticket"]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:r.map((n,l)=>e.jsx(v,{...n},l))}),Array.isArray(t?.data)&&t.data.length>0&&e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 mb-4",children:e.jsxs("div",{className:"page fade-in",children:[e.jsx(i,{title:"Tickets Pendientes",subtitle:"Listado de tickets de Servicio pendientes"}),t.data.map((n,l)=>e.jsx(c,{...n},l))]})}),Array.isArray(o?.data)&&o.data.length>0&&e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 mb-4",children:e.jsxs("div",{className:"page fade-in",children:[e.jsx(i,{title:"Tickets en Progreso",subtitle:"Listado de tickets de Servicio en Progreso"}),o.data.map((n,l)=>e.jsx(c,{...n},l))]})})]})};export{S as PqrHomePage,S as default};
