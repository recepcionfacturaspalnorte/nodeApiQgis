import{i as b,k as A,u as y,l as N,m as p,n as w,o as m,p as _,b as E,j as e,e as f,A as S,B as x,L as q,X as T,q as D,T as O,s as P,v as h,w as B,N as C,r as I}from"./index-DsnDXHI_.js";import{g as k}from"./get-categoria_activo.action-6ZK5yVyF.js";const F=async a=>{const{id:r,files:n=[],...l}=a,o=r==="new";console.log("like in action create"),console.log({userLike:a});const{data:i}=await b({url:o?"/categoria_activo/":`/categoria_activo/${r}`,method:o?"POST":"PUT",data:{...l}});return{...i}},G=async a=>{console.log(a);const{data:r}=await b({url:`/categoria_activo/${a}`,method:"DELETE"});return{...r}},Q=a=>{const r=A(),n=y(),l=N({queryKey:["Categoria_activo",{id:a}],queryFn:()=>k(a),retry:!1,staleTime:1e3*60*.5}),o=p({mutationFn:F,onSuccess:s=>{r.invalidateQueries({queryKey:["Categoria_activos"]}),r.invalidateQueries({queryKey:["Categoria_activo"]})}}),i=p({mutationFn:G,onSuccess:s=>{r.invalidateQueries({queryKey:["Categoria_activos"]}),n(-1)},onError:s=>{console.error(s)}});return{...l,mutation:o,mutationDelete:i,handleSubmit:async s=>{event?.preventDefault(),console.log("onsubmit",s),await o.mutateAsync(s,{onSuccess:t=>{console.log({data:t});let c="Categoria de activo actualizada ";s.id==="new"&&(c="Categoria de activo Creada "),m.fire({title:"Exito",text:c,icon:"success",confirmButtonColor:"#16a34a",timer:2e3,timerProgressBar:!0,background:"#1f2937",color:"#f9fafb"}),n(`/admin/categoria_activo/${t.id}`)},onError:t=>{console.log(t),m.fire({title:"<b>Error al Guardar</b>",text:`${t?.response?.data?.error||t.message||"Error desconocido"}`,icon:"error"})}})},handleDelete:async s=>{(await w()).isConfirmed&&await i.mutateAsync(s,{onSuccess:c=>{m.fire({title:"Exito",text:"Se ha Eliminado Correctamente",icon:"success",confirmButtonColor:"#16a34a",timer:2e3,timerProgressBar:!0,background:"#1f2937",color:"#f9fafb"}),n(`/admin/categoria_activo/${c.id}`)},onError:c=>{console.log(c),m.fire({title:"Error",text:"Error al Eliminar",icon:"error",confirmButtonColor:"#16a34a",background:"#1f2937",color:"#f9fafb"})}})}}},V=({title:a,subTitle:r,onSubmit:n,handleDelete:l,clase:o,isPending:i,isDeleting:u})=>{const{register:d,handleSubmit:s,formState:{errors:t},getValues:c,setValue:$,watch:K}=_({defaultValues:o}),v=E().pathname.split("/").filter(Boolean),j=v[v.length-1];let g=!1;return j==="new"&&(g=!0),i||u?e.jsx(f,{}):e.jsxs("form",{className:"py-0 pb-10",onSubmit:s(n),children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-0 sm:px-0 lg:px-8 flex flex-col gap-4",children:[e.jsx(S,{title:a,subtitle:r}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(x,{variant:"outline",type:"button",children:e.jsxs(q,{to:"/admin/Categoria_activo",className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4"}),"Cancelar"]})}),e.jsxs(x,{type:"submit",disabled:i,children:[e.jsx(D,{className:"w-4 h-4"}),"Guardar"]}),!g&&e.jsxs(x,{onClick:()=>l(+o.id),variant:"destructive",type:"button",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Eliminar"]})]})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-0 sm:px-0 lg:px-8 py-8",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Información de Categoria DE  Activos"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"relative w-full",children:e.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700 mb-2",children:["Código",e.jsx("img",{src:P,alt:"Campo llave",className:"w-4 h-4 ml-2"})]})}),e.jsx("input",{readOnly:!g,type:"text",...d("COD_CATEGORIA_ACTIVO",{required:!0}),className:h("w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all duration-200","read-only:bg-gray-100 read-only:text-gray-500 read-only:cursor-not-allowed",{"border-red-500":t.COD_CATEGORIA_ACTIVO}),placeholder:"Ingrese Código"}),t.COD_CATEGORIA_ACTIVO&&e.jsx("p",{className:"text-red-500 text-sm",children:"El Código es requerido"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Detalle"}),e.jsx("input",{type:"text",...d("detalle",{required:!0}),className:h("w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all duration-200",{"border-red-500":t.detalle}),placeholder:"Nombre"}),t.detalle&&e.jsx("p",{className:"text-red-500 text-sm",children:"el Nombre de la Categoria_activo  es requerida"})]})]})]})})})})]})},z=()=>{const{id:a}=B();y();const{isLoading:r,isError:n,data:l,mutation:o,mutationDelete:i,handleDelete:u,handleSubmit:d}=Q(a||""),s=a==="new"?"Nuevo Categoria de Activos":"Editar Categoria de Activos",t=a==="new"?"Aquí puedes crear una nueva Categoría de Activos.":"Aquí puedes editar la  Categoría de Activos";return n?e.jsx(C,{to:"/admin/categoria_activo"}):r?e.jsx(f,{}):l?e.jsx(e.Fragment,{children:e.jsx(I.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(V,{title:s,subTitle:t,clase:l,onSubmit:d,handleDelete:u,isPending:o.isPending,isDeleting:i.isPending})})}):e.jsx(C,{to:"/admin/categoria_activo"})};export{z as AdminCategoria_activoPage,z as default};
