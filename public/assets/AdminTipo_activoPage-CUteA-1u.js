import{i as y,k as N,u as j,l as w,m as v,n as C,o as m,p as _,b as A,j as e,e as g,A as E,B as p,L as S,X as q,q as P,T as D,s as O,v as h,w as B,N as b,r as I}from"./index-Cvrl6C6l.js";import{g as k}from"./get-tipo_activos.action-Cu_gDK8D.js";const F=async a=>{const{id:o,files:n=[],...l}=a,i=o==="new";console.log("like in action create"),console.log({userLike:a});const{data:r}=await y({url:i?"/tipo_activo/":`/tipo_activo/${o}`,method:i?"POST":"PUT",data:{...l}});return{...r}},Q=async a=>{console.log(a);const{data:o}=await y({url:`/tipo_activo/${a}`,method:"DELETE"});return{...o}},V=a=>{const o=N(),n=j(),l=w({queryKey:["Tipo_activo",{id:a}],queryFn:()=>k(a),retry:!1,staleTime:1e3*60*.5}),i=v({mutationFn:F,onSuccess:s=>{o.invalidateQueries({queryKey:["Tipo_activos"]}),o.invalidateQueries({queryKey:["Tipo_activo"]})}}),r=v({mutationFn:Q,onSuccess:s=>{o.invalidateQueries({queryKey:["Tipo_activos"]}),n(-1)},onError:s=>{console.error(s)}});return{...l,mutation:i,mutationDelete:r,handleSubmit:async s=>{event?.preventDefault(),console.log("onsubmit",s),await i.mutateAsync(s,{onSuccess:t=>{console.log({data:t});let c="Tipo de activo actualizado ";s.id==="new"&&(c="Tipo de activo Creado "),m.fire({title:"Exito",text:c,icon:"success",confirmButtonColor:"#16a34a",timer:2e3,timerProgressBar:!0,background:"#1f2937",color:"#f9fafb"}),n(`/admin/tipo_activo/${t.id}`)},onError:t=>{console.log(t),m.fire({title:"<b>Error al Guardar</b>",text:`${t?.response?.data?.error||t?.response?.data?.message||t.message||"Error desconocido"}`,icon:"error"})}})},handleDelete:async s=>{(await C()).isConfirmed&&await r.mutateAsync(s,{onSuccess:c=>{m.fire({title:"Exito",text:"Se ha Eliminado Correctamente",icon:"success",confirmButtonColor:"#16a34a",timer:2e3,timerProgressBar:!0,background:"#1f2937",color:"#f9fafb"}),n(`/admin/tipo_activo/${c.id}`)},onError:c=>{console.log(c),m.fire({title:"Error",text:"Error al Eliminar",icon:"error",confirmButtonColor:"#16a34a",background:"#1f2937",color:"#f9fafb"})}})}}},$=({title:a,subTitle:o,onSubmit:n,handleDelete:l,clase:i,isPending:r,isDeleting:u})=>{const{register:d,handleSubmit:s,formState:{errors:t},getValues:c,setValue:K,watch:L}=_({defaultValues:i}),f=A().pathname.split("/").filter(Boolean),T=f[f.length-1];let x=!1;return T==="new"&&(x=!0),r||u?e.jsx(g,{}):e.jsxs("form",{className:"py-0 pb-10",onSubmit:s(n),children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-0 sm:px-0 lg:px-8 flex flex-col gap-4",children:[e.jsx(E,{title:a,subtitle:o}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(p,{variant:"outline",type:"button",children:e.jsxs(S,{to:"/admin/tipo_activo",className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),"Cancelar"]})}),e.jsxs(p,{type:"submit",disabled:r,children:[e.jsx(P,{className:"w-4 h-4"}),"Guardar"]}),!x&&e.jsxs(p,{onClick:()=>l(+i.id),variant:"destructive",type:"button",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Eliminar"]})]})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-0 sm:px-0 lg:px-8 py-8",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Información de Tipos de activo"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"relative w-full",children:e.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700 mb-2",children:["Código",e.jsx("img",{src:O,alt:"Campo llave",className:"w-4 h-4 ml-2"})]})}),e.jsx("input",{readOnly:!x,type:"text",...d("COD_TIPO_ACTIVO",{required:!0}),className:h("w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all duration-200","read-only:bg-gray-100 read-only:text-gray-500 read-only:cursor-not-allowed",{"border-red-500":t.COD_TIPO_ACTIVO}),placeholder:"Ingrese Código"}),t.COD_TIPO_ACTIVO&&e.jsx("p",{className:"text-red-500 text-sm",children:"El Código es requerido"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Detalle"}),e.jsx("input",{type:"text",...d("detalle",{required:!0}),className:h("w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all duration-200",{"border-red-500":t.detalle}),placeholder:"Nombre"}),t.detalle&&e.jsx("p",{className:"text-red-500 text-sm",children:"el detalle del  Tipo de activo  es requerida"})]})]})]})})})})]})},M=()=>{const{id:a}=B();j();const{isLoading:o,isError:n,data:l,mutation:i,mutationDelete:r,handleDelete:u,handleSubmit:d}=V(a||""),s=a==="new"?"Nuevo Tipo de Activo":"Editar Tipo de Activo",t=a==="new"?"Aquí puedes crear un nuevo Tipo de Activo.":"Aquí puedes editar el  Tipo de Activo.";return n?e.jsx(b,{to:"/admin/tipo_activo"}):o?e.jsx(g,{}):l?e.jsx(e.Fragment,{children:e.jsx(I.Suspense,{fallback:e.jsx(g,{}),children:e.jsx($,{title:s,subTitle:t,clase:l,onSubmit:d,handleDelete:u,isPending:i.isPending,isDeleting:r.isPending})})}):e.jsx(b,{to:"/admin/tipo_activo"})};export{M as AdminTipo_activoPage,M as default};
