import{i as q,k as v,u as j,l as _,m as h,n as N,o as m,p as w,b as E,j as e,e as g,A as C,B as x,L as S,X as P,q as A,T as D,s as O,v as b,w as B,N as y,r as I}from"./index-Cvrl6C6l.js";import{g as k}from"./get-tipo_equipo.action-DyOYSV1P.js";const Q=async t=>{const{id:o,files:n=[],...l}=t,i=o==="new";console.log("like in action create"),console.log({userLike:t});const{data:r}=await q({url:i?"/tipo_equipo/":`/tipo_equipo/${o}`,method:i?"POST":"PUT",data:{...l}});return{...r}},F=async t=>{console.log(t);const{data:o}=await q({url:`/tipo_equipo/${t}`,method:"DELETE"});return{...o}},U=t=>{const o=v(),n=j(),l=_({queryKey:["Tipo_equipo",{id:t}],queryFn:()=>k(t),retry:!1,staleTime:1e3*60*.5}),i=h({mutationFn:Q,onSuccess:a=>{o.invalidateQueries({queryKey:["Tipo_equipos"]}),o.invalidateQueries({queryKey:["Tipo_equipo"]})}}),r=h({mutationFn:F,onSuccess:a=>{o.invalidateQueries({queryKey:["Tipo_equipos"]}),n(-1)},onError:a=>{console.error(a)}});return{...l,mutation:i,mutationDelete:r,handleSubmit:async a=>{event?.preventDefault(),console.log("onsubmit",a),await i.mutateAsync(a,{onSuccess:s=>{console.log({data:s});let c="Tipo_equipo actualizada ";a.id==="new"&&(c="Tipo_equipo Creada "),m.fire({title:"Exito",text:c,icon:"success",confirmButtonColor:"#16a34a",timer:2e3,timerProgressBar:!0,background:"#1f2937",color:"#f9fafb"}),n(`/admin/tipo_equipo/${s.id}`)},onError:s=>{console.log(s),m.fire({title:"<b>Error al Guardar</b>",text:`${s?.response?.data?.error||s?.response?.data?.message||s.message||"Error desconocido"}`,icon:"error"})}})},handleDelete:async a=>{(await N()).isConfirmed&&await r.mutateAsync(a,{onSuccess:c=>{m.fire({title:"Exito",text:"Se ha Eliminado Correctamente",icon:"success",confirmButtonColor:"#16a34a",timer:2e3,timerProgressBar:!0,background:"#1f2937",color:"#f9fafb"}),n(`/admin/tipo_equipo/${c.id}`)},onError:c=>{console.log(c),m.fire({title:"Error",text:"Error al Eliminar",icon:"error",confirmButtonColor:"#16a34a",background:"#1f2937",color:"#f9fafb"})}})}}},$=({title:t,subTitle:o,onSubmit:n,handleDelete:l,clase:i,isPending:r,isDeleting:d})=>{const{register:u,handleSubmit:a,formState:{errors:s},getValues:c,setValue:K,watch:L}=w({defaultValues:i}),f=E().pathname.split("/").filter(Boolean),T=f[f.length-1];let p=!1;return T==="new"&&(p=!0),r||d?e.jsx(g,{}):e.jsxs("form",{className:"py-0 pb-10",onSubmit:a(n),children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-0 sm:px-0 lg:px-8 flex flex-col gap-4",children:[e.jsx(C,{title:t,subtitle:o}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(x,{variant:"outline",type:"button",children:e.jsxs(S,{to:"/admin/Tipo_equipo",className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),"Cancelar"]})}),e.jsxs(x,{type:"submit",disabled:r,children:[e.jsx(A,{className:"w-4 h-4"}),"Guardar"]}),!p&&e.jsxs(x,{onClick:()=>l(+i.id),variant:"destructive",type:"button",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Eliminar"]})]})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-0 sm:px-0 lg:px-8 py-8",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6",children:"Información de Tipo_equipo"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"relative w-full",children:e.jsxs("label",{className:"flex items-center text-sm font-medium text-slate-700 mb-2",children:["Código",e.jsx("img",{src:O,alt:"Campo llave",className:"w-4 h-4 ml-2"})]})}),e.jsx("input",{readOnly:!p,type:"text",...u("COD_TIPO_EQUIPO",{required:!0}),className:b("w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all duration-200","read-only:bg-gray-100 read-only:text-gray-500 read-only:cursor-not-allowed",{"border-red-500":s.COD_TIPO_EQUIPO}),placeholder:"Ingrese Código"}),s.COD_TIPO_EQUIPO&&e.jsx("p",{className:"text-red-500 text-sm",children:"El Código es requerido"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Detalle"}),e.jsx("input",{type:"text",...u("detalle",{required:!0}),className:b("w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all duration-200",{"border-red-500":s.detalle}),placeholder:"Nombre"}),s.detalle&&e.jsx("p",{className:"text-red-500 text-sm",children:"el Nombre de la Tipo_equipo  es requerida"})]})]})]})})})})]})},M=()=>{const{id:t}=B();j();const{isLoading:o,isError:n,data:l,mutation:i,mutationDelete:r,handleDelete:d,handleSubmit:u}=U(t||""),a=t==="new"?"Nuevo Tipo de equipo":"Editar Tipo de equipo",s=t==="new"?"Aquí puedes crear un nuevo Tipo de equipo.":"Aquí puedes editar el  Tipo de equipo.";return n?e.jsx(y,{to:"/admin/tipo_equipo"}):o?e.jsx(g,{}):l?e.jsx(e.Fragment,{children:e.jsx(I.Suspense,{fallback:e.jsx(g,{}),children:e.jsx($,{title:a,subTitle:s,clase:l,onSubmit:u,handleDelete:d,isPending:i.isPending,isDeleting:r.isPending})})}):e.jsx(y,{to:"/admin/tipo_equipo"})};export{M as AdminTipo_equipoPage,M as default};
